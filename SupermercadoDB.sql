-- MySQL Script generated by MySQL Workbench
-- Sun Nov 22 01:03:21 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Sexo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Sexo` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Sexo` (
  `idSexo` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL COMMENT 'Masculino ou feminino ou outros',
  PRIMARY KEY (`idSexo`),
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Pessoa` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa` (
  `idPessoa` INT NOT NULL AUTO_INCREMENT,
  `nome` TEXT NOT NULL,
  `email` VARCHAR(200) NULL,
  PRIMARY KEY (`idPessoa`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Escolaridade`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Escolaridade` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Escolaridade` (
  `idEscolaridade` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idEscolaridade`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Estado_civil`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Estado_civil` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Estado_civil` (
  `idEstado_civil` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idEstado_civil`),
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Estado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Estado` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Estado` (
  `idEstado` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`idEstado`),
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cidade`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Cidade` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Cidade` (
  `idCidade` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(200) NOT NULL,
  `Estado_idEstado` INT NOT NULL,
  PRIMARY KEY (`idCidade`),
  INDEX `fk_Cidade_Estado1_idx` (`Estado_idEstado` ASC) VISIBLE,
  CONSTRAINT `fk_Cidade_Estado1`
    FOREIGN KEY (`Estado_idEstado`)
    REFERENCES `mydb`.`Estado` (`idEstado`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa_fisica`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Pessoa_fisica` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa_fisica` (
  `Pessoa_idPessoa` INT NOT NULL,
  `cpf` VARCHAR(11) NOT NULL,
  `Sexo_idSexo` INT NOT NULL,
  `Escolaridade_idEscolaridade` INT NULL,
  `data_nasc` DATE NOT NULL,
  `fornecedor` BIT(1) NOT NULL,
  `Estado_civil_idEstado_civil` INT NOT NULL,
  `identidade` VARCHAR(7) NOT NULL,
  `Cidade_idCidade` INT NOT NULL,
  PRIMARY KEY (`Pessoa_idPessoa`),
  INDEX `fk_Pessoa_Sexo1_idx` (`Sexo_idSexo` ASC) VISIBLE,
  INDEX `fk_Pessoa_fisica_Pessoa1_idx` (`Pessoa_idPessoa` ASC) VISIBLE,
  UNIQUE INDEX `cpf_UNIQUE` (`cpf` ASC) VISIBLE,
  INDEX `fk_Pessoa_fisica_Escolaridade1_idx` (`Escolaridade_idEscolaridade` ASC) VISIBLE,
  INDEX `fk_Pessoa_fisica_Estado_civil1_idx` (`Estado_civil_idEstado_civil` ASC) VISIBLE,
  INDEX `fk_Pessoa_fisica_Cidade1_idx` (`Cidade_idCidade` ASC) VISIBLE,
  UNIQUE INDEX `identidade_UNIQUE` (`identidade` ASC) INVISIBLE,
  UNIQUE INDEX `pessoa_UNICA` (`cpf` ASC, `Sexo_idSexo` ASC, `Escolaridade_idEscolaridade` ASC, `data_nasc` ASC, `fornecedor` ASC, `Estado_civil_idEstado_civil` ASC, `identidade` ASC, `Cidade_idCidade` ASC) VISIBLE,
  CONSTRAINT `fk_Pessoa_Sexo1`
    FOREIGN KEY (`Sexo_idSexo`)
    REFERENCES `mydb`.`Sexo` (`idSexo`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Pessoa_fisica_Pessoa1`
    FOREIGN KEY (`Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa` (`idPessoa`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Pessoa_fisica_Escolaridade1`
    FOREIGN KEY (`Escolaridade_idEscolaridade`)
    REFERENCES `mydb`.`Escolaridade` (`idEscolaridade`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Pessoa_fisica_Estado_civil1`
    FOREIGN KEY (`Estado_civil_idEstado_civil`)
    REFERENCES `mydb`.`Estado_civil` (`idEstado_civil`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Pessoa_fisica_Cidade1`
    FOREIGN KEY (`Cidade_idCidade`)
    REFERENCES `mydb`.`Cidade` (`idCidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Setor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Setor` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Setor` (
  `idSetor` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`idSetor`),
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cargo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Cargo` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Cargo` (
  `idCargo` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(200) NOT NULL,
  `salario` FLOAT NOT NULL,
  `Setor_idSetor` INT NOT NULL,
  PRIMARY KEY (`idCargo`),
  INDEX `fk_Cargo_Setor1_idx` (`Setor_idSetor` ASC) VISIBLE,
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE,
  UNIQUE INDEX `cargo_UNICO` (`nome` ASC, `Setor_idSetor` ASC) VISIBLE,
  CONSTRAINT `fk_Cargo_Setor1`
    FOREIGN KEY (`Setor_idSetor`)
    REFERENCES `mydb`.`Setor` (`idSetor`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tipo_telefone`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Tipo_telefone` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_telefone` (
  `idTipo_Telefone` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL COMMENT 'residencial, pessoal',
  PRIMARY KEY (`idTipo_Telefone`),
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Telefone`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Telefone` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Telefone` (
  `idTelefone` INT NOT NULL AUTO_INCREMENT,
  `numero` VARCHAR(200) NOT NULL,
  `Tipo_telefone_idTipo_Telefone` INT NOT NULL,
  PRIMARY KEY (`idTelefone`),
  INDEX `fk_Telefone_Tipo_telefone1_idx` (`Tipo_telefone_idTipo_Telefone` ASC) VISIBLE,
  UNIQUE INDEX `numero_UNIQUE` (`numero` ASC) VISIBLE,
  CONSTRAINT `fk_Telefone_Tipo_telefone1`
    FOREIGN KEY (`Tipo_telefone_idTipo_Telefone`)
    REFERENCES `mydb`.`Tipo_telefone` (`idTipo_Telefone`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tipo_endereco`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Tipo_endereco` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_endereco` (
  `idTipo_endereco` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idTipo_endereco`),
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Bairro`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Bairro` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Bairro` (
  `idBairro` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(200) NOT NULL,
  `Cidade_idCidade` INT NOT NULL,
  PRIMARY KEY (`idBairro`),
  INDEX `fk_Bairro_Cidade1_idx` (`Cidade_idCidade` ASC) VISIBLE,
  UNIQUE INDEX `Bairro_UNICO` (`nome` ASC, `Cidade_idCidade` ASC) VISIBLE,
  CONSTRAINT `fk_Bairro_Cidade1`
    FOREIGN KEY (`Cidade_idCidade`)
    REFERENCES `mydb`.`Cidade` (`idCidade`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Endereco`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Endereco` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Endereco` (
  `idEndereco` INT NOT NULL AUTO_INCREMENT,
  `rua` VARCHAR(200) NOT NULL,
  `numero` VARCHAR(200) NOT NULL,
  `cep` VARCHAR(200) NOT NULL,
  `complemento` VARCHAR(200) NULL,
  `Tipo_endereco_idTipo_endereco` INT NOT NULL,
  `Bairro_idBairro` INT NOT NULL,
  PRIMARY KEY (`idEndereco`),
  INDEX `fk_Endereco_Tipo_endereco1_idx` (`Tipo_endereco_idTipo_endereco` ASC) INVISIBLE,
  INDEX `fk_Endereco_Bairro1_idx` (`Bairro_idBairro` ASC) INVISIBLE,
  UNIQUE INDEX `Endereco_UNICO` (`rua` ASC, `numero` ASC, `cep` ASC, `Tipo_endereco_idTipo_endereco` ASC, `Bairro_idBairro` ASC, `complemento` ASC) INVISIBLE,
  CONSTRAINT `fk_Endereco_Tipo_endereco1`
    FOREIGN KEY (`Tipo_endereco_idTipo_endereco`)
    REFERENCES `mydb`.`Tipo_endereco` (`idTipo_endereco`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Endereco_Bairro1`
    FOREIGN KEY (`Bairro_idBairro`)
    REFERENCES `mydb`.`Bairro` (`idBairro`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Funcionario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Funcionario` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Funcionario` (
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `matricula` INT NOT NULL AUTO_INCREMENT,
  `comissao` FLOAT NULL,
  `nome_pai` TEXT NULL,
  `data_nasc_pai` DATE NULL,
  `nome_mae` VARCHAR(200) NOT NULL,
  `data_nasc_mae` DATE NULL,
  `Cargo_idCargo` INT NOT NULL,
  `Funcionario_Pessoa_fisica_Pessoa_idPessoa` INT NULL,
  `ativo` BIT(1) NOT NULL,
  PRIMARY KEY (`Pessoa_fisica_Pessoa_idPessoa`),
  INDEX `fk_Funcionario_Cargo1_idx` (`Cargo_idCargo` ASC) VISIBLE,
  INDEX `fk_Funcionario_Pessoa_fisica1_idx` (`Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  UNIQUE INDEX `matricula_UNIQUE` (`matricula` ASC) VISIBLE,
  INDEX `fk_Funcionario_Funcionario1_idx` (`Funcionario_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  UNIQUE INDEX `funcionario_UNICO` (`matricula` ASC, `nome_mae` ASC, `Cargo_idCargo` ASC, `ativo` ASC) INVISIBLE,
  CONSTRAINT `fk_Funcionario_Cargo1`
    FOREIGN KEY (`Cargo_idCargo`)
    REFERENCES `mydb`.`Cargo` (`idCargo`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Funcionario_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Funcionario_Funcionario1`
    FOREIGN KEY (`Funcionario_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Funcionario` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tipo_mercadoria`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Tipo_mercadoria` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_mercadoria` (
  `idTipo_mercadoria` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idTipo_mercadoria`),
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Desconto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Desconto` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Desconto` (
  `idDesconto` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(200) NULL,
  `valor` FLOAT NOT NULL,
  `validade` DATE NOT NULL,
  PRIMARY KEY (`idDesconto`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa_juridica`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Pessoa_juridica` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa_juridica` (
  `Pessoa_idPessoa` INT NOT NULL,
  `cnpj` VARCHAR(14) NOT NULL,
  `fornecedor` BIT(1) NOT NULL,
  `Funcionario_Pessoa_fisica_Pessoa_idPessoa` INT NULL,
  PRIMARY KEY (`Pessoa_idPessoa`),
  INDEX `fk_Pessoa_juridica_Pessoa1_idx` (`Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Pessoa_juridica_Funcionario1_idx` (`Funcionario_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  UNIQUE INDEX `cnpj_UNIQUE` (`cnpj` ASC) INVISIBLE,
  CONSTRAINT `fk_Pessoa_juridica_Pessoa1`
    FOREIGN KEY (`Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa` (`idPessoa`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Pessoa_juridica_Funcionario1`
    FOREIGN KEY (`Funcionario_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Funcionario` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Marca`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Marca` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Marca` (
  `idMarca` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(75) NOT NULL,
  `Desconto_idDesconto` INT NULL,
  `Pessoa_juridica_Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`idMarca`),
  INDEX `fk_Marca_Desconto1_idx` (`Desconto_idDesconto` ASC) VISIBLE,
  INDEX `fk_Marca_Pessoa_juridica1_idx` (`Pessoa_juridica_Pessoa_idPessoa` ASC) VISIBLE,
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE,
  UNIQUE INDEX `marca_UNICA` (`nome` ASC, `Pessoa_juridica_Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Marca_Desconto1`
    FOREIGN KEY (`Desconto_idDesconto`)
    REFERENCES `mydb`.`Desconto` (`idDesconto`)
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Marca_Pessoa_juridica1`
    FOREIGN KEY (`Pessoa_juridica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa_juridica` (`Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Mercadoria`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Mercadoria` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Mercadoria` (
  `idMercadoria` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(200) NOT NULL,
  `preco_venda` FLOAT NOT NULL,
  `peso` VARCHAR(10) NULL,
  `quantidade` INT NOT NULL,
  `data_vencimento` DATE NOT NULL,
  `volume` VARCHAR(10) NULL,
  `criado_em` TIMESTAMP NOT NULL,
  `preco_compra` FLOAT NOT NULL,
  `Funcionario_Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Tipo_mercadoria_idTipo_mercadoria` INT NOT NULL,
  `Marca_idMarca` INT NOT NULL,
  PRIMARY KEY (`idMercadoria`),
  INDEX `fk_Mercadoria_Funcionario1_idx` (`Funcionario_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Mercadoria_Tipo_mercadoria1_idx` (`Tipo_mercadoria_idTipo_mercadoria` ASC) VISIBLE,
  INDEX `fk_Mercadoria_Marca1_idx` (`Marca_idMarca` ASC) VISIBLE,
  UNIQUE INDEX `mercadoria_UNICA` (`nome` ASC, `Tipo_mercadoria_idTipo_mercadoria` ASC, `Marca_idMarca` ASC) VISIBLE,
  CONSTRAINT `fk_Mercadoria_Funcionario1`
    FOREIGN KEY (`Funcionario_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Funcionario` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Mercadoria_Tipo_mercadoria1`
    FOREIGN KEY (`Tipo_mercadoria_idTipo_mercadoria`)
    REFERENCES `mydb`.`Tipo_mercadoria` (`idTipo_mercadoria`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Mercadoria_Marca1`
    FOREIGN KEY (`Marca_idMarca`)
    REFERENCES `mydb`.`Marca` (`idMarca`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Cliente` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Cliente` (
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Funcionario_Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`Pessoa_fisica_Pessoa_idPessoa`),
  INDEX `fk_Cliente_Funcionario1_idx` (`Funcionario_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Cliente_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Cliente_Funcionario1`
    FOREIGN KEY (`Funcionario_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Funcionario` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Dependente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Dependente` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Dependente` (
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Funcionario_Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`Pessoa_fisica_Pessoa_idPessoa`),
  INDEX `fk_Dependente_Pessoa_fisica1_idx` (`Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Dependente_Funcionario1_idx` (`Funcionario_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Dependente_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Dependente_Funcionario1`
    FOREIGN KEY (`Funcionario_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Funcionario` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Atualizado_em`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Atualizado_em` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Atualizado_em` (
  `idAtualizado_em` INT NOT NULL AUTO_INCREMENT,
  `Mercadoria_idMercadoria` INT NOT NULL,
  `instante` TIMESTAMP NOT NULL,
  `Funcionario_Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`idAtualizado_em`),
  INDEX `fk_Atualizado_em_Mercadoria1_idx` (`Mercadoria_idMercadoria` ASC) VISIBLE,
  INDEX `fk_Atualizado_em_Funcionario1_idx` (`Funcionario_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Atualizado_em_Mercadoria1`
    FOREIGN KEY (`Mercadoria_idMercadoria`)
    REFERENCES `mydb`.`Mercadoria` (`idMercadoria`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Atualizado_em_Funcionario1`
    FOREIGN KEY (`Funcionario_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Funcionario` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tipo_pagamento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Tipo_pagamento` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_pagamento` (
  `idTipo_pagamento` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(200) NOT NULL COMMENT 'À vista, parcelado',
  PRIMARY KEY (`idTipo_pagamento`),
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Forma_pagamento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Forma_pagamento` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Forma_pagamento` (
  `idForma_pagamento` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL COMMENT 'cartao de debito - a vista, cartao de credito - parcelado, cheque - a vista, cheque - parcelado, dinheiro - a vista',
  `Tipo_pagamento_idTipo_pagamento` INT NOT NULL,
  PRIMARY KEY (`idForma_pagamento`),
  INDEX `fk_Forma_pagamento_Tipo_pagamento1_idx` (`Tipo_pagamento_idTipo_pagamento` ASC) VISIBLE,
  UNIQUE INDEX `forma_UNICA` (`nome` ASC, `Tipo_pagamento_idTipo_pagamento` ASC) VISIBLE,
  CONSTRAINT `fk_Forma_pagamento_Tipo_pagamento1`
    FOREIGN KEY (`Tipo_pagamento_idTipo_pagamento`)
    REFERENCES `mydb`.`Tipo_pagamento` (`idTipo_pagamento`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pagamento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Pagamento` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Pagamento` (
  `idPagamento` INT NOT NULL AUTO_INCREMENT,
  `Desconto_idDesconto` INT NOT NULL,
  `id_Forma_pagamento` INT NOT NULL,
  `valor_total` FLOAT NOT NULL,
  `valor_recebido` FLOAT NOT NULL,
  `troco` FLOAT NOT NULL,
  `Funcionario_Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`idPagamento`),
  INDEX `fk_Pagamento_Desconto1_idx` (`Desconto_idDesconto` ASC) VISIBLE,
  INDEX `fk_Pagamento_Funcionario1_idx` (`Funcionario_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Pagamento_Forma_pagamento1_idx` (`id_Forma_pagamento` ASC) VISIBLE,
  CONSTRAINT `fk_Pagamento_Desconto1`
    FOREIGN KEY (`Desconto_idDesconto`)
    REFERENCES `mydb`.`Desconto` (`idDesconto`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Pagamento_Funcionario1`
    FOREIGN KEY (`Funcionario_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Funcionario` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Pagamento_Forma_pagamento1`
    FOREIGN KEY (`id_Forma_pagamento`)
    REFERENCES `mydb`.`Forma_pagamento` (`idForma_pagamento`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Compra`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Compra` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Compra` (
  `Cliente_Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Pagamento_idPagamento` INT NOT NULL,
  `quantidade` INT NOT NULL,
  `Mercadoria_idMercadoria` INT NOT NULL,
  PRIMARY KEY (`Cliente_Pessoa_fisica_Pessoa_idPessoa`, `Pagamento_idPagamento`, `Mercadoria_idMercadoria`),
  INDEX `fk_Compra_Cliente1_idx` (`Cliente_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Compra_Pagamento1_idx` (`Pagamento_idPagamento` ASC) VISIBLE,
  INDEX `fk_Compra_Mercadoria1_idx` (`Mercadoria_idMercadoria` ASC) VISIBLE,
  CONSTRAINT `fk_Compra_Cliente1`
    FOREIGN KEY (`Cliente_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Cliente` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Compra_Pagamento1`
    FOREIGN KEY (`Pagamento_idPagamento`)
    REFERENCES `mydb`.`Pagamento` (`idPagamento`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Compra_Mercadoria1`
    FOREIGN KEY (`Mercadoria_idMercadoria`)
    REFERENCES `mydb`.`Mercadoria` (`idMercadoria`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Parcela`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Parcela` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Parcela` (
  `idParcela` INT NOT NULL AUTO_INCREMENT,
  `valor` FLOAT NOT NULL,
  `paga` BIT(1) NULL,
  `multa` FLOAT NULL,
  `data_vencimento` DATE NOT NULL,
  `juros` FLOAT NULL,
  `data_pagamento` DATE NULL,
  `Pagamento_idPagamento` INT NOT NULL,
  PRIMARY KEY (`idParcela`),
  INDEX `fk_Parcela_Pagamento1_idx` (`Pagamento_idPagamento` ASC) VISIBLE,
  CONSTRAINT `fk_Parcela_Pagamento1`
    FOREIGN KEY (`Pagamento_idPagamento`)
    REFERENCES `mydb`.`Pagamento` (`idPagamento`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Reabastecimento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Reabastecimento` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Reabastecimento` (
  `Mercadoria_idMercadoria` INT NOT NULL,
  `Funcionario_Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_fisica_Pessoa_idPessoa` INT NULL,
  `Pessoa_juridica_Pessoa_idPessoa` INT NULL,
  `quantidade` INT NOT NULL,
  PRIMARY KEY (`Mercadoria_idMercadoria`, `Funcionario_Pessoa_fisica_Pessoa_idPessoa`),
  INDEX `fk_Pessoa_juridica_has_Mercadoria_Mercadoria1_idx` (`Mercadoria_idMercadoria` ASC) VISIBLE,
  INDEX `fk_Pessoa_juridica_has_Mercadoria_Pessoa_juridica1_idx` (`Pessoa_juridica_Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Reabastecimento_Pessoa_fisica1_idx` (`Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Reabastecimento_Funcionario1_idx` (`Funcionario_Pessoa_fisica_Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Pessoa_juridica_has_Mercadoria_Pessoa_juridica1`
    FOREIGN KEY (`Pessoa_juridica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa_juridica` (`Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Pessoa_juridica_has_Mercadoria_Mercadoria1`
    FOREIGN KEY (`Mercadoria_idMercadoria`)
    REFERENCES `mydb`.`Mercadoria` (`idMercadoria`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Reabastecimento_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Reabastecimento_Funcionario1`
    FOREIGN KEY (`Funcionario_Pessoa_fisica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Funcionario` (`Pessoa_fisica_Pessoa_idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Telefone_tem_Pessoa`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Telefone_tem_Pessoa` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Telefone_tem_Pessoa` (
  `Telefone_idTelefone` INT NOT NULL AUTO_INCREMENT,
  `Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`Telefone_idTelefone`, `Pessoa_idPessoa`),
  INDEX `fk_Telefone_has_Pessoa_Pessoa1_idx` (`Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Telefone_has_Pessoa_Telefone1_idx` (`Telefone_idTelefone` ASC) VISIBLE,
  CONSTRAINT `fk_Telefone_has_Pessoa_Telefone1`
    FOREIGN KEY (`Telefone_idTelefone`)
    REFERENCES `mydb`.`Telefone` (`idTelefone`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Telefone_has_Pessoa_Pessoa1`
    FOREIGN KEY (`Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa` (`idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa_tem_endereco`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Pessoa_tem_endereco` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa_tem_endereco` (
  `Endereco_idEndereco` INT NOT NULL,
  `Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`Endereco_idEndereco`, `Pessoa_idPessoa`),
  INDEX `fk_Endereco_has_Pessoa_Pessoa1_idx` (`Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Endereco_has_Pessoa_Endereco1_idx` (`Endereco_idEndereco` ASC) VISIBLE,
  CONSTRAINT `fk_Endereco_has_Pessoa_Endereco1`
    FOREIGN KEY (`Endereco_idEndereco`)
    REFERENCES `mydb`.`Endereco` (`idEndereco`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Endereco_has_Pessoa_Pessoa1`
    FOREIGN KEY (`Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa` (`idPessoa`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Historico_desconto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Historico_desconto` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Historico_desconto` (
  `Desconto_idDesconto` INT NOT NULL,
  `Mercadoria_idMercadoria` INT NULL,
  `Tipo_mercadoria_idTipo_mercadoria` INT NULL,
  `Marca_idMarca` INT NULL,
  PRIMARY KEY (`Desconto_idDesconto`),
  INDEX `fk_Mercadoria_has_Desconto_Desconto1_idx` (`Desconto_idDesconto` ASC) VISIBLE,
  INDEX `fk_Mercadoria_has_Desconto_Mercadoria1_idx` (`Mercadoria_idMercadoria` ASC) VISIBLE,
  INDEX `fk_Historico_desconto_Tipo_mercadoria1_idx` (`Tipo_mercadoria_idTipo_mercadoria` ASC) VISIBLE,
  INDEX `fk_Historico_desconto_Marca1_idx` (`Marca_idMarca` ASC) VISIBLE,
  CONSTRAINT `fk_Mercadoria_has_Desconto_Mercadoria1`
    FOREIGN KEY (`Mercadoria_idMercadoria`)
    REFERENCES `mydb`.`Mercadoria` (`idMercadoria`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Mercadoria_has_Desconto_Desconto1`
    FOREIGN KEY (`Desconto_idDesconto`)
    REFERENCES `mydb`.`Desconto` (`idDesconto`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Historico_desconto_Tipo_mercadoria1`
    FOREIGN KEY (`Tipo_mercadoria_idTipo_mercadoria`)
    REFERENCES `mydb`.`Tipo_mercadoria` (`idTipo_mercadoria`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Historico_desconto_Marca1`
    FOREIGN KEY (`Marca_idMarca`)
    REFERENCES `mydb`.`Marca` (`idMarca`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
