-- MySQL Script generated by MySQL Workbench
-- Sun Nov 15 21:41:13 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Sexo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Sexo` (
  `idSexo` INT NOT NULL,
  `descricao` VARCHAR(45) NULL COMMENT 'Masculino ou feminino ou outros',
  PRIMARY KEY (`idSexo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa` (
  `idPessoa` INT NOT NULL AUTO_INCREMENT,
  `nome` TEXT NOT NULL,
  PRIMARY KEY (`idPessoa`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa_fisica`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa_fisica` (
  `Pessoa_idPessoa` INT NOT NULL,
  `cpf` INT NOT NULL,
  `Sexo_idSexo` INT NOT NULL,
  `escolaridade` VARCHAR(45) NULL COMMENT 'fundamental, fundamental incompleto, medio, medio incompleto, superior, superior incompleto',
  `data_nasc` DATE NOT NULL,
  `fornecedor` BIT(1) NOT NULL,
  `Pessoa_fisicacol` VARCHAR(45) NULL,
  PRIMARY KEY (`Pessoa_idPessoa`, `cpf`),
  INDEX `fk_Pessoa_Sexo1_idx` (`Sexo_idSexo` ASC) VISIBLE,
  INDEX `fk_Pessoa_fisica_Pessoa1_idx` (`Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Pessoa_Sexo1`
    FOREIGN KEY (`Sexo_idSexo`)
    REFERENCES `mydb`.`Sexo` (`idSexo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pessoa_fisica_Pessoa1`
    FOREIGN KEY (`Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa` (`idPessoa`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Setor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Setor` (
  `idSetor` INT NOT NULL,
  `nome` TEXT NULL,
  PRIMARY KEY (`idSetor`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cargo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Cargo` (
  `idCargo` INT NOT NULL AUTO_INCREMENT,
  `descricao` TEXT NULL,
  `salario` FLOAT NULL,
  `Cargo` VARCHAR(45) NULL,
  `Setor_idSetor` INT NOT NULL,
  PRIMARY KEY (`idCargo`, `Setor_idSetor`),
  INDEX `fk_Cargo_Setor1_idx` (`Setor_idSetor` ASC) VISIBLE,
  CONSTRAINT `fk_Cargo_Setor1`
    FOREIGN KEY (`Setor_idSetor`)
    REFERENCES `mydb`.`Setor` (`idSetor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tipo_telefone`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_telefone` (
  `idTipo_Telefone` INT NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(45) NULL COMMENT 'residencial, pessoal',
  PRIMARY KEY (`idTipo_Telefone`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Funcionario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Funcionario` (
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_fisica_cpf` INT NOT NULL,
  `matricula` INT NOT NULL,
  `comissao` FLOAT NULL,
  `Cadastrante_Funcionario_matricula` INT NULL,
  `nome_pai` TEXT NULL,
  `data_nasc_pai` DATE NULL,
  `nome_mae` TEXT NOT NULL,
  `data_nasc_mae` DATE NULL,
  `Cargo_idCargo` INT NOT NULL,
  PRIMARY KEY (`Pessoa_fisica_Pessoa_idPessoa`, `Pessoa_fisica_cpf`, `matricula`, `Cargo_idCargo`),
  INDEX `fk_Funcionario_Funcionario1_idx` (`Cadastrante_Funcionario_matricula` ASC) VISIBLE,
  INDEX `fk_Funcionario_Cargo1_idx` (`Cargo_idCargo` ASC) VISIBLE,
  INDEX `fk_Funcionario_Pessoa_fisica1_idx` (`Pessoa_fisica_Pessoa_idPessoa` ASC, `Pessoa_fisica_cpf` ASC) VISIBLE,
  CONSTRAINT `fk_Funcionario_Funcionario1`
    FOREIGN KEY (`Cadastrante_Funcionario_matricula`)
    REFERENCES `mydb`.`Funcionario` (`matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Funcionario_Cargo1`
    FOREIGN KEY (`Cargo_idCargo`)
    REFERENCES `mydb`.`Cargo` (`idCargo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Funcionario_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa` , `Pessoa_fisica_cpf`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa` , `cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa_juridica`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa_juridica` (
  `Pessoa_idPessoa` INT NOT NULL,
  `cnpj` INT NOT NULL,
  `gerente_matricula_registro` INT NULL,
  `fornecedor` BIT(1) NOT NULL,
  `Pessoa_juridicacol` VARCHAR(45) NULL,
  PRIMARY KEY (`Pessoa_idPessoa`, `cnpj`),
  INDEX `fk_Pessoa_juridica_Pessoa1_idx` (`Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Pessoa_juridica_Funcionario1_idx` (`gerente_matricula_registro` ASC) VISIBLE,
  CONSTRAINT `fk_Pessoa_juridica_Pessoa1`
    FOREIGN KEY (`Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa` (`idPessoa`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pessoa_juridica_Funcionario1`
    FOREIGN KEY (`gerente_matricula_registro`)
    REFERENCES `mydb`.`Funcionario` (`matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Telefone`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Telefone` (
  `idTelefone` INT NOT NULL AUTO_INCREMENT,
  `numero` INT NULL,
  `Tipo_telefone_idTipo_Telefone` INT NOT NULL,
  `Pessoa_juridica_Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`idTelefone`),
  INDEX `fk_Telefone_Tipo_telefone1_idx` (`Tipo_telefone_idTipo_Telefone` ASC) VISIBLE,
  INDEX `fk_Telefone_Pessoa_juridica1_idx` (`Pessoa_juridica_Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Telefone_Tipo_telefone1`
    FOREIGN KEY (`Tipo_telefone_idTipo_Telefone`)
    REFERENCES `mydb`.`Tipo_telefone` (`idTipo_Telefone`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Telefone_Pessoa_juridica1`
    FOREIGN KEY (`Pessoa_juridica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa_juridica` (`Pessoa_idPessoa`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tipo_endereco`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_endereco` (
  `idTipo_endereco` INT NOT NULL,
  `descricao` VARCHAR(45) NULL,
  PRIMARY KEY (`idTipo_endereco`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Estado`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Estado` (
  `idEstado` INT NOT NULL,
  `nome` TEXT NULL,
  PRIMARY KEY (`idEstado`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cidade`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Cidade` (
  `idCidade` INT NOT NULL,
  `nome` TEXT NULL,
  `Estado_idEstado` INT NOT NULL,
  PRIMARY KEY (`idCidade`),
  INDEX `fk_Cidade_Estado1_idx` (`Estado_idEstado` ASC) VISIBLE,
  CONSTRAINT `fk_Cidade_Estado1`
    FOREIGN KEY (`Estado_idEstado`)
    REFERENCES `mydb`.`Estado` (`idEstado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Bairro`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Bairro` (
  `idBairro` INT NOT NULL,
  `nome` TEXT NULL,
  `Cidade_idCidade` INT NOT NULL,
  PRIMARY KEY (`idBairro`),
  INDEX `fk_Bairro_Cidade1_idx` (`Cidade_idCidade` ASC) VISIBLE,
  CONSTRAINT `fk_Bairro_Cidade1`
    FOREIGN KEY (`Cidade_idCidade`)
    REFERENCES `mydb`.`Cidade` (`idCidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Endereco`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Endereco` (
  `idEndereco` INT NOT NULL,
  `rua` TEXT NULL,
  `numero` TEXT NULL,
  `cep` INT NULL,
  `Enderecocol` VARCHAR(45) NULL,
  `Tipo_endereco_idTipo_endereco` INT NOT NULL,
  `Bairro_idBairro` INT NOT NULL,
  `Pessoa_juridica_Pessoa_idPessoa` INT NOT NULL,
  PRIMARY KEY (`idEndereco`),
  INDEX `fk_Endereco_Tipo_endereco1_idx` (`Tipo_endereco_idTipo_endereco` ASC) VISIBLE,
  INDEX `fk_Endereco_Bairro1_idx` (`Bairro_idBairro` ASC) VISIBLE,
  INDEX `fk_Endereco_Pessoa_juridica1_idx` (`Pessoa_juridica_Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Endereco_Tipo_endereco1`
    FOREIGN KEY (`Tipo_endereco_idTipo_endereco`)
    REFERENCES `mydb`.`Tipo_endereco` (`idTipo_endereco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Endereco_Bairro1`
    FOREIGN KEY (`Bairro_idBairro`)
    REFERENCES `mydb`.`Bairro` (`idBairro`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Endereco_Pessoa_juridica1`
    FOREIGN KEY (`Pessoa_juridica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Pessoa_juridica` (`Pessoa_idPessoa`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa_tem_telefone`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa_tem_telefone` (
  `Telefone_idTelefone` INT NOT NULL,
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_fisica_cpf` INT NOT NULL,
  PRIMARY KEY (`Telefone_idTelefone`, `Pessoa_fisica_Pessoa_idPessoa`, `Pessoa_fisica_cpf`),
  INDEX `fk_Telefone_has_Pessoa_Telefone1_idx` (`Telefone_idTelefone` ASC) VISIBLE,
  INDEX `fk_Pessoa_tem_telefone_Pessoa_fisica1_idx` (`Pessoa_fisica_Pessoa_idPessoa` ASC, `Pessoa_fisica_cpf` ASC) VISIBLE,
  CONSTRAINT `fk_Telefone_has_Pessoa_Telefone1`
    FOREIGN KEY (`Telefone_idTelefone`)
    REFERENCES `mydb`.`Telefone` (`idTelefone`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pessoa_tem_telefone_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa` , `Pessoa_fisica_cpf`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa` , `cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pessoa_tem_Endereco`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa_tem_Endereco` (
  `Endereco_idEndereco` INT NOT NULL,
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_fisica_cpf` INT NOT NULL,
  PRIMARY KEY (`Endereco_idEndereco`, `Pessoa_fisica_Pessoa_idPessoa`, `Pessoa_fisica_cpf`),
  INDEX `fk_Pessoa_has_Endereco_Endereco1_idx` (`Endereco_idEndereco` ASC) VISIBLE,
  INDEX `fk_Pessoa_tem_Endereco_Pessoa_fisica1_idx` (`Pessoa_fisica_Pessoa_idPessoa` ASC, `Pessoa_fisica_cpf` ASC) VISIBLE,
  CONSTRAINT `fk_Pessoa_has_Endereco_Endereco1`
    FOREIGN KEY (`Endereco_idEndereco`)
    REFERENCES `mydb`.`Endereco` (`idEndereco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pessoa_tem_Endereco_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa` , `Pessoa_fisica_cpf`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa` , `cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Desconto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Desconto` (
  `idDesconto` INT NOT NULL,
  `valor` FLOAT NOT NULL,
  `validade` DATE NOT NULL,
  PRIMARY KEY (`idDesconto`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tipo_mercadoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_mercadoria` (
  `idTipo_mercadoria` INT NOT NULL,
  `descricao` VARCHAR(45) NOT NULL,
  `Desconto_idDesconto` INT NULL,
  PRIMARY KEY (`idTipo_mercadoria`, `Desconto_idDesconto`),
  INDEX `fk_Tipo_mercadoria_Desconto1_idx` (`Desconto_idDesconto` ASC) VISIBLE,
  CONSTRAINT `fk_Tipo_mercadoria_Desconto1`
    FOREIGN KEY (`Desconto_idDesconto`)
    REFERENCES `mydb`.`Desconto` (`idDesconto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Marca`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Marca` (
  `idMarca` INT NOT NULL,
  `nome` VARCHAR(75) NULL,
  `Desconto_idDesconto` INT NULL,
  `Pessoa_juridica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_juridica_Pessoa_cnpj` INT NOT NULL,
  PRIMARY KEY (`idMarca`, `Desconto_idDesconto`, `Pessoa_juridica_Pessoa_idPessoa`, `Pessoa_juridica_Pessoa_cnpj`),
  INDEX `fk_Marca_Desconto1_idx` (`Desconto_idDesconto` ASC) VISIBLE,
  INDEX `fk_Marca_Pessoa_juridica1_idx` (`Pessoa_juridica_Pessoa_idPessoa` ASC, `Pessoa_juridica_Pessoa_cnpj` ASC) VISIBLE,
  CONSTRAINT `fk_Marca_Desconto1`
    FOREIGN KEY (`Desconto_idDesconto`)
    REFERENCES `mydb`.`Desconto` (`idDesconto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Marca_Pessoa_juridica1`
    FOREIGN KEY (`Pessoa_juridica_Pessoa_idPessoa` , `Pessoa_juridica_Pessoa_cnpj`)
    REFERENCES `mydb`.`Pessoa_juridica` (`Pessoa_idPessoa` , `cnpj`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Mercadoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Mercadoria` (
  `idMercadoria` INT NOT NULL AUTO_INCREMENT,
  `Criou_Funcionario_matricula` INT NOT NULL,
  `Tipo_mercadoria_idTipo_mercadoria` INT NOT NULL,
  `Tipo_mercadoria_idDesconto` INT NULL,
  `Mercadoria_Desconto` INT NULL,
  `Marca_idMarca` INT NOT NULL,
  `Marca_Pessoa_juridica_Pessoa_idPessoa` INT NOT NULL,
  `Marca_Desconto_idDesconto` INT NULL,
  `nome` TEXT NOT NULL,
  `preco_venda` FLOAT NOT NULL,
  `peso` VARCHAR(10) NULL,
  `quantidade` INT NULL,
  `data_vencimento` DATE NOT NULL,
  `volume` VARCHAR(10) NULL,
  `criado_em` TIMESTAMP NULL,
  `preco_compra` FLOAT NOT NULL,
  PRIMARY KEY (`idMercadoria`, `Criou_Funcionario_matricula`, `Tipo_mercadoria_idTipo_mercadoria`, `Tipo_mercadoria_idDesconto`, `Mercadoria_Desconto`, `Marca_idMarca`, `Marca_Pessoa_juridica_Pessoa_idPessoa`, `Marca_Desconto_idDesconto`),
  INDEX `fk_Mercadoria_Funcionario1_idx` (`Criou_Funcionario_matricula` ASC) VISIBLE,
  INDEX `fk_Mercadoria_Tipo_mercadoria1_idx` (`Tipo_mercadoria_idTipo_mercadoria` ASC, `Tipo_mercadoria_idDesconto` ASC) VISIBLE,
  INDEX `fk_Mercadoria_Desconto1_idx` (`Mercadoria_Desconto` ASC) VISIBLE,
  INDEX `fk_Mercadoria_Marca1_idx` (`Marca_idMarca` ASC, `Marca_Desconto_idDesconto` ASC, `Marca_Pessoa_juridica_Pessoa_idPessoa` ASC) VISIBLE,
  CONSTRAINT `fk_Mercadoria_Funcionario1`
    FOREIGN KEY (`Criou_Funcionario_matricula`)
    REFERENCES `mydb`.`Funcionario` (`matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Mercadoria_Tipo_mercadoria1`
    FOREIGN KEY (`Tipo_mercadoria_idTipo_mercadoria` , `Tipo_mercadoria_idDesconto`)
    REFERENCES `mydb`.`Tipo_mercadoria` (`idTipo_mercadoria` , `Desconto_idDesconto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Mercadoria_Desconto1`
    FOREIGN KEY (`Mercadoria_Desconto`)
    REFERENCES `mydb`.`Desconto` (`idDesconto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Mercadoria_Marca1`
    FOREIGN KEY (`Marca_idMarca` , `Marca_Desconto_idDesconto` , `Marca_Pessoa_juridica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Marca` (`idMarca` , `Desconto_idDesconto` , `Pessoa_juridica_Pessoa_idPessoa`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Cliente` (
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_fisica_cpf` INT NOT NULL,
  `Funcionario_Funcionario_Pessoa_idPessoa` INT NOT NULL,
  `Funcionario_Funcionario_Pessoa_cpf` INT NOT NULL,
  `Funcionario_matricula` INT NOT NULL,
  INDEX `fk_Cliente_Funcionario1_idx` (`Funcionario_Funcionario_Pessoa_idPessoa` ASC, `Funcionario_Funcionario_Pessoa_cpf` ASC, `Funcionario_matricula` ASC) VISIBLE,
  PRIMARY KEY (`Pessoa_fisica_Pessoa_idPessoa`, `Pessoa_fisica_cpf`),
  CONSTRAINT `fk_Cliente_Funcionario1`
    FOREIGN KEY (`Funcionario_matricula`)
    REFERENCES `mydb`.`Funcionario` (`matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Cliente_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa` , `Pessoa_fisica_cpf`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa` , `cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Dependente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Dependente` (
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_fisica_cpf` INT NOT NULL,
  `Responsavel_Funcionario_matricula` INT NOT NULL,
  PRIMARY KEY (`Pessoa_fisica_Pessoa_idPessoa`, `Pessoa_fisica_cpf`, `Responsavel_Funcionario_matricula`),
  INDEX `fk_Dependente_Funcionario1_idx` (`Responsavel_Funcionario_matricula` ASC) VISIBLE,
  INDEX `fk_Dependente_Pessoa_fisica1_idx` (`Pessoa_fisica_Pessoa_idPessoa` ASC, `Pessoa_fisica_cpf` ASC) VISIBLE,
  CONSTRAINT `fk_Dependente_Funcionario1`
    FOREIGN KEY (`Responsavel_Funcionario_matricula`)
    REFERENCES `mydb`.`Funcionario` (`matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Dependente_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa` , `Pessoa_fisica_cpf`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa` , `cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Atualizado_em`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Atualizado_em` (
  `idAtualizado_em` INT NOT NULL AUTO_INCREMENT,
  `Mercadoria_idMercadoria` INT NOT NULL,
  `Atualizou_Funcionario_matricula` INT NOT NULL,
  `instante` TIMESTAMP NOT NULL,
  PRIMARY KEY (`idAtualizado_em`, `Mercadoria_idMercadoria`, `Atualizou_Funcionario_matricula`),
  INDEX `fk_Atualizado_em_Mercadoria1_idx` (`Mercadoria_idMercadoria` ASC) VISIBLE,
  INDEX `fk_Atualizado_em_Funcionario1_idx` (`Atualizou_Funcionario_matricula` ASC) VISIBLE,
  CONSTRAINT `fk_Atualizado_em_Mercadoria1`
    FOREIGN KEY (`Mercadoria_idMercadoria`)
    REFERENCES `mydb`.`Mercadoria` (`idMercadoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Atualizado_em_Funcionario1`
    FOREIGN KEY (`Atualizou_Funcionario_matricula`)
    REFERENCES `mydb`.`Funcionario` (`matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tipo_pagamento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Tipo_pagamento` (
  `idTipo_pagamento` INT NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(45) NOT NULL COMMENT 'Ã€ vista, parcelado',
  PRIMARY KEY (`idTipo_pagamento`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pagamento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Pagamento` (
  `idPagamento` INT NOT NULL,
  `Desconto_idDesconto` INT NOT NULL,
  `Tipo_pagamento_idTipo_pagamento` INT NOT NULL,
  `valor_total` FLOAT NOT NULL,
  `valor_recebido` FLOAT NOT NULL,
  `troco` FLOAT NOT NULL,
  `Funcionario_matricula` INT NOT NULL,
  PRIMARY KEY (`idPagamento`, `Desconto_idDesconto`, `Tipo_pagamento_idTipo_pagamento`, `Funcionario_matricula`),
  INDEX `fk_Pagamento_Desconto1_idx` (`Desconto_idDesconto` ASC) VISIBLE,
  INDEX `fk_Pagamento_Tipo_pagamento1_idx` (`Tipo_pagamento_idTipo_pagamento` ASC) VISIBLE,
  INDEX `fk_Pagamento_Funcionario1_idx` (`Funcionario_matricula` ASC) VISIBLE,
  CONSTRAINT `fk_Pagamento_Desconto1`
    FOREIGN KEY (`Desconto_idDesconto`)
    REFERENCES `mydb`.`Desconto` (`idDesconto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pagamento_Tipo_pagamento1`
    FOREIGN KEY (`Tipo_pagamento_idTipo_pagamento`)
    REFERENCES `mydb`.`Tipo_pagamento` (`idTipo_pagamento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pagamento_Funcionario1`
    FOREIGN KEY (`Funcionario_matricula`)
    REFERENCES `mydb`.`Funcionario` (`matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Compra`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Compra` (
  `Pagamento_idPagamento` INT NOT NULL,
  `Pagamento_Desconto_idDesconto` INT NULL,
  `Pagamento_Tipo_pagamento_idTipo_pagamento` INT NOT NULL,
  `Pagamento_Funcionario_matricula` INT NOT NULL,
  `Cliente_Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Cliente_Pessoa_fisica_cpf` INT NOT NULL,
  `Mercadoria_idMercadoria` INT NOT NULL,
  `Mercadoria_Criou_Funcionario_matricula` INT NOT NULL,
  `Mercadoria_Tipo_mercadoria_idTipo_mercadoria` INT NOT NULL,
  `Mercadoria_Tipo_mercadoria_idDesconto` INT NOT NULL,
  `Mercadoria_Mercadoria_Desconto` INT NOT NULL,
  `Mercadoria_Marca_idMarca1` INT NOT NULL,
  `Mercadoria_Marca_Pessoa_juridica_Pessoa_idPessoa` INT NOT NULL,
  `Mercadoria_Marca_Desconto_idDesconto1` INT NOT NULL,
  `quantidade` INT NOT NULL,
  PRIMARY KEY (`Pagamento_idPagamento`, `Pagamento_Desconto_idDesconto`, `Pagamento_Tipo_pagamento_idTipo_pagamento`, `Pagamento_Funcionario_matricula`, `Cliente_Pessoa_fisica_Pessoa_idPessoa`, `Cliente_Pessoa_fisica_cpf`, `Mercadoria_idMercadoria`, `Mercadoria_Criou_Funcionario_matricula`, `Mercadoria_Tipo_mercadoria_idTipo_mercadoria`, `Mercadoria_Tipo_mercadoria_idDesconto`, `Mercadoria_Mercadoria_Desconto`, `Mercadoria_Marca_idMarca1`, `Mercadoria_Marca_Pessoa_juridica_Pessoa_idPessoa`, `Mercadoria_Marca_Desconto_idDesconto1`),
  INDEX `fk_Compra_Pagamento1_idx` (`Pagamento_idPagamento` ASC, `Pagamento_Desconto_idDesconto` ASC, `Pagamento_Tipo_pagamento_idTipo_pagamento` ASC, `Pagamento_Funcionario_matricula` ASC) VISIBLE,
  INDEX `fk_Compra_Cliente1_idx` (`Cliente_Pessoa_fisica_Pessoa_idPessoa` ASC, `Cliente_Pessoa_fisica_cpf` ASC) VISIBLE,
  INDEX `fk_Compra_Mercadoria1_idx` (`Mercadoria_idMercadoria` ASC, `Mercadoria_Criou_Funcionario_matricula` ASC, `Mercadoria_Tipo_mercadoria_idTipo_mercadoria` ASC, `Mercadoria_Tipo_mercadoria_idDesconto` ASC, `Mercadoria_Mercadoria_Desconto` ASC, `Mercadoria_Marca_idMarca1` ASC, `Mercadoria_Marca_Pessoa_juridica_Pessoa_idPessoa` ASC, `Mercadoria_Marca_Desconto_idDesconto1` ASC) VISIBLE,
  CONSTRAINT `fk_Compra_Pagamento1`
    FOREIGN KEY (`Pagamento_idPagamento` , `Pagamento_Desconto_idDesconto` , `Pagamento_Tipo_pagamento_idTipo_pagamento` , `Pagamento_Funcionario_matricula`)
    REFERENCES `mydb`.`Pagamento` (`idPagamento` , `Desconto_idDesconto` , `Tipo_pagamento_idTipo_pagamento` , `Funcionario_matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Compra_Cliente1`
    FOREIGN KEY (`Cliente_Pessoa_fisica_Pessoa_idPessoa` , `Cliente_Pessoa_fisica_cpf`)
    REFERENCES `mydb`.`Cliente` (`Pessoa_fisica_Pessoa_idPessoa` , `Pessoa_fisica_cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Compra_Mercadoria1`
    FOREIGN KEY (`Mercadoria_idMercadoria` , `Mercadoria_Criou_Funcionario_matricula` , `Mercadoria_Tipo_mercadoria_idTipo_mercadoria` , `Mercadoria_Tipo_mercadoria_idDesconto` , `Mercadoria_Mercadoria_Desconto` , `Mercadoria_Marca_idMarca1` , `Mercadoria_Marca_Pessoa_juridica_Pessoa_idPessoa` , `Mercadoria_Marca_Desconto_idDesconto1`)
    REFERENCES `mydb`.`Mercadoria` (`idMercadoria` , `Criou_Funcionario_matricula` , `Tipo_mercadoria_idTipo_mercadoria` , `Tipo_mercadoria_idDesconto` , `Mercadoria_Desconto` , `Marca_idMarca` , `Marca_Pessoa_juridica_Pessoa_idPessoa` , `Marca_Desconto_idDesconto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Parcela`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Parcela` (
  `idParcela` INT NOT NULL,
  `valor` FLOAT NULL,
  `paga` BIT(1) NULL,
  `multa` FLOAT NULL,
  `data_vencimento` DATE NULL,
  `juros` FLOAT NULL,
  `data_pagamento` DATE NULL,
  `Pagamento_idPagamento` INT NOT NULL,
  PRIMARY KEY (`idParcela`, `Pagamento_idPagamento`),
  INDEX `fk_Parcela_Pagamento1_idx` (`Pagamento_idPagamento` ASC) VISIBLE,
  CONSTRAINT `fk_Parcela_Pagamento1`
    FOREIGN KEY (`Pagamento_idPagamento`)
    REFERENCES `mydb`.`Pagamento` (`idPagamento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Forma_pagamento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Forma_pagamento` (
  `idForma_pagamento` INT NOT NULL,
  `descricao` VARCHAR(45) NOT NULL COMMENT 'cartao de debito - a vista, cartao de credito - parcelado, cheque - a vista, cheque - parcelado, dinheiro - a vista',
  `Tipo_pagamento_idTipo_pagamento` INT NOT NULL,
  PRIMARY KEY (`idForma_pagamento`, `Tipo_pagamento_idTipo_pagamento`),
  INDEX `fk_Forma_pagamento_Tipo_pagamento1_idx` (`Tipo_pagamento_idTipo_pagamento` ASC) VISIBLE,
  CONSTRAINT `fk_Forma_pagamento_Tipo_pagamento1`
    FOREIGN KEY (`Tipo_pagamento_idTipo_pagamento`)
    REFERENCES `mydb`.`Tipo_pagamento` (`idTipo_pagamento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Reabastecimento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Reabastecimento` (
  `Pessoa_juridica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_juridica_cnpj` INT NOT NULL,
  `Mercadoria_idMercadoria` INT NOT NULL,
  `Mercadoria_Tipo_mercadoria_idTipo_mercadoria` INT NOT NULL,
  `Mercadoria_Marca_idMarca` INT NOT NULL,
  `Mercadoria_Marca_Pessoa_juridica_Pessoa_idPessoa` INT NOT NULL,
  `Funcionario_matricula` INT NOT NULL,
  `Pessoa_fisica_Pessoa_idPessoa` INT NOT NULL,
  `Pessoa_fisica_cpf` INT NOT NULL,
  `quantidade` INT NOT NULL,
  PRIMARY KEY (`Pessoa_juridica_Pessoa_idPessoa`, `Pessoa_juridica_cnpj`, `Mercadoria_idMercadoria`, `Mercadoria_Tipo_mercadoria_idTipo_mercadoria`, `Mercadoria_Marca_idMarca`, `Mercadoria_Marca_Pessoa_juridica_Pessoa_idPessoa`, `Funcionario_matricula`, `Pessoa_fisica_Pessoa_idPessoa`, `Pessoa_fisica_cpf`),
  INDEX `fk_Pessoa_juridica_has_Mercadoria_Mercadoria1_idx` (`Mercadoria_idMercadoria` ASC, `Mercadoria_Tipo_mercadoria_idTipo_mercadoria` ASC, `Mercadoria_Marca_idMarca` ASC, `Mercadoria_Marca_Pessoa_juridica_Pessoa_idPessoa` ASC) VISIBLE,
  INDEX `fk_Pessoa_juridica_has_Mercadoria_Pessoa_juridica1_idx` (`Pessoa_juridica_Pessoa_idPessoa` ASC, `Pessoa_juridica_cnpj` ASC) VISIBLE,
  INDEX `fk_Reabastecimento_Funcionario1_idx` (`Funcionario_matricula` ASC) VISIBLE,
  INDEX `fk_Reabastecimento_Pessoa_fisica1_idx` (`Pessoa_fisica_Pessoa_idPessoa` ASC, `Pessoa_fisica_cpf` ASC) VISIBLE,
  CONSTRAINT `fk_Pessoa_juridica_has_Mercadoria_Pessoa_juridica1`
    FOREIGN KEY (`Pessoa_juridica_Pessoa_idPessoa` , `Pessoa_juridica_cnpj`)
    REFERENCES `mydb`.`Pessoa_juridica` (`Pessoa_idPessoa` , `cnpj`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pessoa_juridica_has_Mercadoria_Mercadoria1`
    FOREIGN KEY (`Mercadoria_idMercadoria` , `Mercadoria_Tipo_mercadoria_idTipo_mercadoria` , `Mercadoria_Marca_idMarca` , `Mercadoria_Marca_Pessoa_juridica_Pessoa_idPessoa`)
    REFERENCES `mydb`.`Mercadoria` (`idMercadoria` , `Tipo_mercadoria_idTipo_mercadoria` , `Marca_idMarca` , `Marca_Pessoa_juridica_Pessoa_idPessoa`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Reabastecimento_Funcionario1`
    FOREIGN KEY (`Funcionario_matricula`)
    REFERENCES `mydb`.`Funcionario` (`matricula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Reabastecimento_Pessoa_fisica1`
    FOREIGN KEY (`Pessoa_fisica_Pessoa_idPessoa` , `Pessoa_fisica_cpf`)
    REFERENCES `mydb`.`Pessoa_fisica` (`Pessoa_idPessoa` , `cpf`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
